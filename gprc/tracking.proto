
syntax = "proto3";

package SafeEntry;

// Note: Come back to
service TrackingService  {

    // Login procedure
    rpc Login (User) returns (User) {}

    rpc GetAllLocations(Empty) returns (stream Location) {}

    rpc GetCheckOutOptions(Empty) returns (stream CheckOut) {}

    rpc CreateCheckInIndividual(Location) returns (Status) {}
    rpc CreateCheckInGroup(Location) returns (Status) {}
    rpc CreateCheckOut(CheckOut) returns (Status) {}

    // 5.
    rpc CreateGroup(Group) returns (Group) {}

    // 6. 
    rpc AddUserToGroup(stream User) returns (Status) {}
    
    // 8
    rpc GetSafeEntry(Empty) returns (stream SafeEntry) {}
    
    // 9. Self report covid case
    rpc CreateReportCovidCase (Case) returns (Status) {}

    // 11.
    rpc GetGroupsByUser(Empty) returns (stream Group) {}
}

message Empty {

}

message User {
    string name = 1;
    string nric = 2;
    string role_name = 3;
    Group group = 4;
    Status status = 5;
}

message Group {
    string name = 1;
    User user = 2;
    Status status = 3;
}

message Status {
    bool status = 1;
}

message Location {
    Group group = 1;
    string name = 2;
}

message CheckOut {
    int32 id = 1;
    Location location = 2;
    Group group = 3;
}

message SafeEntry {
    string checkin = 2;
    string checkout = 3;
}

message Case {
    User user = 1;
    Location location = 2;
}

//python3 -m grpc_tools.protoc -I . --python_out=. --grpc_python_out=. ./tracking.proto