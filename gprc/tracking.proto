
syntax = "proto3";

package SafeEntry;

service TrackingService  {

    // Login procedure
    rpc Login (User) returns (User) {}

    rpc GetAllLocations(Empty) returns (stream Location) {}

    // 1
    rpc CreateCheckInIndividual(CheckInIndividual) returns (Status) {}

    // 2; Need duplicate Here? 
    rpc CreateCheckOutIndividual(CheckInIndividual) returns (Status) {}

    // 3; Need to come back here
    rpc CreateCheckInGroup(CheckInGroup) returns (Status) {}

    // 4. Need duplicate Here? 
    rpc CreateCheckOutGroup(CheckInGroup) returns (Status) {}
    
    // 5.
    rpc CreateGroup(Group) returns (Status) {}

    // 6. 
    rpc AddUserToGroup(stream User) returns (Status) {}

    // 7. (Come back here)
    
    // 8
    rpc GetSafeEntry(Empty) returns (stream SafeEntry) {}
    
    // 9. Self report covid case
    rpc CreateReportCovidCase (Case) returns (Status) {}

    // 11.
    rpc GetGroupsByUser(Empty) returns (stream Group) {}
}

message Empty {

}

message User {
    string name = 1;
    string nric = 2;
    string role_name = 3;
    Group group = 4;
    Status status = 5;
}

message Group {
    string name = 1;
}

message Status {
    bool status = 1;
}

message Location {
    string name = 1;
}

message CheckInIndividual {
    string location = 2;
}

message CheckInGroup {
    string name = 1;
    string location = 2;
}

message SafeEntry {
    string checkin = 2;
    string checkout = 3;
}

message Case {
    User user = 1;
    Location location = 2;
}

//python3 -m grpc_tools.protoc -I . --python_out=. --grpc_python_out=. ./tracking.proto